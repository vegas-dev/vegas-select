// @vegas-VGSelect v1.0.1
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).window=e.window||{})}(this,(function(e){"use strict";var t=new class{constructor(){}hide(e){e.style.display="none"}show(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block";e.style.display=t}listener(e,t,s){t?document.addEventListener(e,(function(e){let n=document.body.querySelectorAll(t),l=e.target,o=-1;for(;l&&-1===(o=Array.prototype.indexOf.call(n,l));)l=l.parentElement;o>-1&&function(){"function"==typeof s&&s(l,e)}.call(l,e)})):window.addEventListener(e,(function(e){"function"==typeof s&&s(e)}))}merge(){const e=this,t=e=>e&&"object"==typeof e;for(var s=arguments.length,n=new Array(s),l=0;l<s;l++)n[l]=arguments[l];return n.reduce(((s,n)=>(Object.keys(n).forEach((l=>{const o=s[l],c=n[l];Array.isArray(o)&&Array.isArray(c)?s[l]=o.concat(...c):t(o)&&t(c)?s[l]=e.merge(o,c):s[l]=c})),s)),{})}};e.VGSelect=class{constructor(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.classes={container:"vg-select",dropdown:"vg-select-dropdown",list:"vg-select-list",option:"vg-select-list--option",current:"vg-select-current",search:"vg-select-search"};const n={search:!1};return e?"SELECT"!==e.tagName?(console.error('Тэг должен быть "select"'),!1):(this.settings=function(e,s,n){let l=t.merge(s,n),o=[].filter.call(e.attributes,(function(e){return/^data-/.test(e.name)}));for(let e of o)"data-search"===e.name&&(l.search="false"!==e.value);return l}(e,n,s),void this.create(e)):(console.error("Первый параметр не должен быть пустым"),!1)}create(e){let t=e.options[e.selectedIndex].innerText,s=e.options,n=e.getAttribute("class"),l=document.createElement("div");n=n.split(" ");for(const e of n)l.classList.add(e);let o=document.createElement("div");o.classList.add(this.classes.current),o.innerText=t,l.append(o);let c=document.createElement("div");c.classList.add(this.classes.dropdown),l.append(c);let r=document.createElement("ul");r.classList.add(this.classes.list);let i=0;for(const t of s){let s=document.createElement("li");s.dataset.value=t.getAttribute("value"),s.innerText=t.innerText,s.classList.add(this.classes.option),i===e.selectedIndex&&s.classList.add("selected"),t.hasAttribute("disabled")&&s.classList.add("disabled"),r.append(s),i++}c.append(r),e.insertAdjacentElement("afterend",l),this.settings.search&&this.search(l),this.toggle(l)}toggle(){const e=this;t.listener("click","."+e.classes.current,(function(t,s){let n=t.closest(".vg-select"),l=document.querySelectorAll(".vg-select");if(l.length)for(const e of l)e!==n&&e.classList.remove("show");if(n.classList.contains("show"))n.classList.remove("show");else if(n.classList.add("show"),e.settings.search){let e=n.querySelector("input");e&&e.focus()}s.preventDefault()})),t.listener("click","."+e.classes.option,(function(t,s){if(s.preventDefault(),!t.classList.contains("disabled")){let s=t.closest("."+e.classes.container),n=s.querySelectorAll("."+e.classes.option);if(n.length)for(const e of n)e.classList.remove("selected");t.classList.add("selected"),s.querySelector("."+e.classes.current).innerText=t.innerText,s.classList.remove("show");let l=s.previousSibling;l.value=t.dataset.value,l.dispatchEvent(new Event("change"))}})),t.listener("mouseup","",(function(e){if(e.preventDefault(),!e.target.closest(".vg-select")){let e=document.querySelectorAll(".vg-select");if(e.length)for(const t of e)t.classList.remove("show")}}))}search(e){const s=this;let n=e.querySelector("."+s.classes.dropdown),l=document.createElement("div");l.classList.add(s.classes.search);let o=document.createElement("input");o.setAttribute("name","vg-select-search"),o.setAttribute("type","text"),o.setAttribute("placeholder","Поиск..."),l.append(o),n.prepend(l),t.listener("keyup","[name=vg-select-search]",(function(e,n){n.preventDefault();let l=e.closest("."+s.classes.dropdown).querySelector("."+s.classes.list);if(l){let n=l.querySelectorAll("."+s.classes.option),o=e.value;for(const e of n)t.show(e);if(o.length){o=o.trim(),o=o.toLowerCase(),o=c(o,!0);for(const e of n){-1===e.innerText.toLowerCase().indexOf(o)&&t.hide(e)}}}}));const c=function(e,t){let s,n="й ц у к е н г ш щ з х ъ ф ы в а п р о л д ж э я ч с м и т ь б ю".split(/ +/g),l="q w e r t y u i o p [ ] a s d f g h j k l ; ' z x c v b n m , .".split(/ +/g);for(s=0;s<n.length;s++)e=(e=e.split(t?l[s]:n[s]).join(t?n[s]:l[s])).split(t?l[s].toUpperCase():n[s].toUpperCase()).join(t?n[s].toUpperCase():l[s].toUpperCase());return e}}}}));
